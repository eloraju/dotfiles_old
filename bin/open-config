#!/bin/env bash

declare -A CONFIGS
TERM='alacritty'

CONFIGS=(
        ["i3"]=$HOME/.config/i3/config
        ["bspwm"]=$HOME/.config/bspwm/bspwmrc
        ["sxhkd"]=$HOME/.config/sxhkd/sxhkdrc
        ["nvim"]=$HOME/.config/nvim/init.vim
        ["polybar"]=$HOME/.config/polybar/config
)

gen_confs() {
    for c in "${!CONFIGS[@]}"
    do
        echo "$c"
    done
}

openScripts() {
   script=$( (ls ~/bin) | dmenu -l 10 )

    if [[ -n "bin" ]];
    then
        openInEditor ~/bin/$script
    else
        touch ~/bin/$script
        chmod 755 ~/bin/$script
        openInEditor ~/bin/$script
    fi
}

openConfig() {
    sel=$( (gen_confs) | dmenu -l 10 ) 
    if [[ -n "$sel" ]]; then
        path=${CONFIGS[$sel]}
        openInEditor $path
    fi
}

openInEditor() {
    echo $TERM
    $TERM -e nvim $1
}

main() {
    choice=$( (echo "scripts" && echo "confs") | dmenu -l 10 )

    if [[ "$choice" == "scripts" ]]; then
        openScripts
    elif [[ "$choice" == "confs" ]]; then
        openConfig
    fi

}
main
exit 0
